(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{7984:(e,r,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return o(9378)}])},9099:(e,r,o)=>{e.exports=o(4294)},9378:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>i});var s=o(7876),n=o(4232),l=o(9099),a=o(7640),t=o(7685);function i(){let{login:e}=(0,a.A)(),r=(0,l.useRouter)(),[o,i]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[d,g]=(0,n.useState)(!1),m=async s=>{s.preventDefault(),g(!0);try{let s;console.log("Login form submitted");try{s=await e({email:o,password:u}),console.log("Login result:",s)}catch(e){if(console.error("Login call error:",e),"AxiosError"===e.name)return void console.log("AxiosError caught in login page, error should be handled in AuthContext");t.Ay.error("An unexpected error occurred. Please try again.");return}if(s&&s.success&&s.role)switch(console.log("Login successful, redirecting to:",s.role),s.role){case"admin":r.push("/admin/dashboard");break;case"staff":r.push("/staff/dashboard");break;case"user":r.push("/user/home");break;default:t.Ay.error("Unknown role: "+s.role)}else console.log("Login failed, result:",s)}catch(e){console.error("Outer error in handleSubmit:",e),"AxiosError"!==e.name&&t.Ay.error("An unexpected error occurred. Please try again.")}finally{g(!1)}};return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Login"}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",value:o,onChange:e=>i(e.target.value),className:"w-full mt-1 px-4 py-2 border rounded-lg shadow-sm focus:ring focus:outline-none focus:border-orange-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm text-gray-700",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:u,onChange:e=>c(e.target.value),className:"w-full mt-1 px-4 py-2 border rounded-lg shadow-sm focus:ring focus:outline-none focus:border-orange-500",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-orange-500 text-white py-2 rounded-lg font-semibold hover:bg-orange-600 focus:outline-none focus:ring focus:ring-orange-200 disabled:bg-gray-400",children:d?"Logging in...":"Login"})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=7984)),_N_E=e.O()}]);