(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{953:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var l=a(7876),r=a(4232),t=a(8230),n=a.n(t),i=a(9099),d=a(7685),c=a(4177),o=a(7640);function m(){let e=(0,i.useRouter)(),{user:s,logout:a}=(0,o.A)(),[t,m]=(0,r.useState)([]),[x,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(""),[b,p]=(0,r.useState)("all"),[v,j]=(0,r.useState)("all"),[f,N]=(0,r.useState)("name");(0,r.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,c.am)();m(e)}catch(e){console.error("Error loading menu items:",e),d.Ay.error("Failed to load menu items")}finally{u(!1)}})()},[]);let y=async(e,s)=>{if(window.confirm('Are you sure you want to delete "'.concat(s,'"?')))try{await (0,c.ax)(e),m(t.filter(s=>s._id!==e)),d.Ay.success("Menu item deleted successfully!")}catch(e){console.error("Error deleting menu item:",e),d.Ay.error("Failed to delete menu item")}},w=t.filter(e=>{var s;let a=e.name.toLowerCase().includes(h.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(h.toLowerCase())),l="all"===b||e.category===b,r="all"===v||"available"===v&&e.isAvailable||"unavailable"===v&&!e.isAvailable;return a&&l&&r}).sort((e,s)=>{switch(f){case"name":return e.name.localeCompare(s.name);case"price-low":return e.price-s.price;case"price-high":return s.price-e.price;case"category":return(e.category||"").localeCompare(s.category||"");default:return 0}});return x?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading menu items..."})]})}):(0,l.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,l.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-gradient-to-tr from-orange-500 to-amber-700 text-white shadow-lg py-6 px-4",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold mb-8 tracking-wide flex items-center",children:[(0,l.jsx)("span",{className:"mr-3",children:"\uD83C\uDF7D️"})," Admin Panel"]}),(0,l.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,l.jsx)(n(),{href:"/admin/dashboard",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Dashboard"}),(0,l.jsx)(n(),{href:"/admin/menu-items",className:"block py-2 px-4 rounded bg-orange-700 bg-opacity-60 font-semibold",children:"Menu Items"}),(0,l.jsx)(n(),{href:"/admin/orders",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Orders"}),(0,l.jsx)(n(),{href:"/admin/users",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Users"}),(0,l.jsx)(n(),{href:"/admin/revenue",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Revenue"})]}),(0,l.jsx)("hr",{className:"my-4 border-amber-300"}),(0,l.jsx)("div",{className:"text-sm text-orange-100 mt-auto",children:s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"font-bold",children:s.name}),(0,l.jsxs)("div",{className:"text-xs",children:["(",s.email,")"]}),(0,l.jsxs)("div",{className:"mt-1 text-orange-300",children:["Role: ",s.role]}),(0,l.jsx)("button",{onClick:()=>a(),className:"mt-4 w-full py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded text-sm font-semibold transition",children:"Logout"})]})})]}),(0,l.jsx)("main",{className:"flex-1 p-6 md:p-10",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-orange-800",children:"Menu Items"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your restaurant's menu items"})]}),(0,l.jsxs)(n(),{href:"/admin/menu-items/create",className:"mt-4 md:mt-0 inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition",children:[(0,l.jsx)("span",{className:"mr-2",children:"+"}),"Add New Item"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF7D️"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,l.jsx)("span",{className:"text-2xl",children:"✅"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>e.isAvailable).length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,l.jsx)("span",{className:"text-2xl",children:"❌"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Unavailable"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>!e.isAvailable).length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Price"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",(t.reduce((e,s)=>e+s.price,0)/Math.max(t.length,1)).toFixed(2)]})]})]})})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm mb-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,l.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Search by name or description...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,l.jsx)("select",{value:b,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",children:[{value:"all",label:"All Categories"},{value:"appetizer",label:"\uD83E\uDD57 Appetizer"},{value:"main",label:"\uD83C\uDF7D️ Main Course"},{value:"dessert",label:"\uD83C\uDF70 Dessert"},{value:"beverage",label:"\uD83E\uDD64 Beverage"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Availability"}),(0,l.jsx)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",children:[{value:"all",label:"All Items"},{value:"available",label:"✅ Available"},{value:"unavailable",label:"❌ Unavailable"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,l.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",children:[(0,l.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,l.jsx)("option",{value:"price-low",children:"Price (Low to High)"}),(0,l.jsx)("option",{value:"price-high",children:"Price (High to Low)"}),(0,l.jsx)("option",{value:"category",children:"Category"})]})]})]})})]}),0===w.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF7D️"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No menu items found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search or filters"}),(0,l.jsxs)(n(),{href:"/admin/menu-items/create",className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition",children:[(0,l.jsx)("span",{className:"mr-2",children:"+"}),"Add Your First Item"]})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(s=>(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[(0,l.jsxs)("div",{className:"h-48 bg-gray-200 relative overflow-hidden",children:[s.images&&s.images.length>0?(0,l.jsx)("img",{src:"".concat("http://localhost:8083/api/v1","/files/").concat(s.images[0]),alt:s.name,className:"w-full h-full object-cover",onError:e=>{var s;e.currentTarget.style.display="none",null==(s=e.currentTarget.nextElementSibling)||s.classList.remove("hidden")}}):null,(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center ".concat(s.images&&s.images.length>0?"hidden":""),children:(0,l.jsx)("span",{className:"text-4xl text-gray-400",children:"\uD83C\uDF7D️"})}),(0,l.jsx)("div",{className:"absolute top-3 right-3",children:(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(s.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.isAvailable?"Available":"Unavailable"})})]}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate flex-1",children:s.name}),(0,l.jsxs)("span",{className:"text-xl font-bold text-orange-600 ml-2",children:["$",s.price.toFixed(2)]})]}),s.description&&(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[(0,l.jsx)("span",{className:"mr-1",children:(e=>{switch(e){case"appetizer":return"\uD83E\uDD57";case"main":default:return"\uD83C\uDF7D️";case"dessert":return"\uD83C\uDF70";case"beverage":return"\uD83E\uDD64"}})(s.category||"")}),(e=>{switch(e){case"appetizer":return"Appetizer";case"main":return"Main Course";case"dessert":return"Dessert";case"beverage":return"Beverage";default:return e}})(s.category||"")]}),s.images&&s.images.length>0&&(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"Has image"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>e.push("/admin/menu-items/".concat(s._id,"/edit")),className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>y(s._id,s.name),className:"flex-1 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition",children:"Delete"})]})]})]},s._id))}),w.length>0&&(0,l.jsxs)("div",{className:"mt-8 text-center text-gray-600",children:["Showing ",w.length," of ",t.length," menu items"]})]})})]})}},6436:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/menu-items",function(){return a(953)}])},9099:(e,s,a)=>{e.exports=a(4294)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=6436)),_N_E=e.O()}]);