(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{4572:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(9737)}])},9737:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(7876),r=s(7640),l=s(8230),i=s.n(l),n=s(4232),d=s(4177),c=s(7685);function o(){let{user:e,logout:t}=(0,r.A)(),[s,l]=(0,n.useState)(!0),[o,x]=(0,n.useState)({menuItems:0,totalOrders:0,revenue:"$0",users:0}),[m,h]=(0,n.useState)([]),[u,g]=(0,n.useState)(null),[p,b]=(0,n.useState)(null),j=async()=>{try{var e,t;l(!0);let[s,a,r,i,n,c]=await Promise.all([(0,d.am)(),(0,d.Gb)(),(0,d.hU)(),(0,d.CK)(),(0,d.F$)(),(0,d.O6)()]);g((null==(e=n.data)?void 0:e.data)||null),b((null==(t=c.data)?void 0:t.data)||null);let o=i.reduce((e,t)=>e+(t.amount||0),0);x({menuItems:s.length,totalOrders:a.length,revenue:"$".concat(o.toLocaleString()),users:r.length});let m=a.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());h(m.slice(0,5))}catch(e){console.error("Error loading dashboard data:",e),c.Ay.error("Failed to load dashboard data")}finally{l(!1)}};return((0,n.useEffect)(()=>{j()},[]),s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,a.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-gradient-to-tr from-orange-500 to-amber-700 text-white shadow-lg py-6 px-4",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold mb-8 tracking-wide flex items-center",children:[(0,a.jsx)("span",{className:"mr-3",children:"\uD83C\uDF7D️"})," Admin Panel"]}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(i(),{href:"/admin/dashboard",className:"block py-2 px-4 rounded bg-orange-700 bg-opacity-60 font-semibold",children:"Dashboard"}),(0,a.jsx)(i(),{href:"/admin/menu-items",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Menu Items"}),(0,a.jsx)(i(),{href:"/admin/orders",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Orders"}),(0,a.jsx)(i(),{href:"/admin/users",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Users"}),(0,a.jsx)(i(),{href:"/admin/revenue",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Revenue"}),(0,a.jsx)(i(),{href:"/",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Go Home"})]}),(0,a.jsx)("hr",{className:"my-4 border-amber-300"}),(0,a.jsx)("div",{className:"text-sm text-orange-100 mt-auto",children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"font-bold",children:e.name}),(0,a.jsxs)("div",{className:"text-xs",children:["(",e.email,")"]}),(0,a.jsxs)("div",{className:"mt-1 text-orange-300",children:["Role: ",e.role]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("button",{onClick:()=>t(),className:"w-full py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded text-sm font-semibold transition",children:"Logout to Login"}),(0,a.jsx)("button",{onClick:()=>t("/"),className:"w-full py-2 px-4 bg-red-400 hover:bg-red-500 text-white rounded text-sm font-semibold transition",children:"Logout to Home"}),(0,a.jsx)("button",{onClick:()=>t("/admin/login"),className:"w-full py-2 px-4 bg-red-300 hover:bg-red-400 text-white rounded text-sm font-semibold transition",children:"Logout to Admin Login"})]})]})})]}),(0,a.jsxs)("main",{className:"flex-1 p-6 md:p-10",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-orange-800 mb-2 sm:mb-0",children:"Dashboard Overview"}),(0,a.jsx)(i(),{href:"/admin/menu-items/create",className:"inline-block bg-amber-500 text-white px-5 py-2 rounded-md font-semibold hover:bg-orange-500 transition",children:"+ Add New Menu Item"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[{label:"Menu Items",value:s?"...":o.menuItems,icon:"\uD83C\uDF7D️",href:"/admin/menu-items",color:"bg-orange-100 text-orange-700"},{label:"Total Orders",value:s?"...":o.totalOrders,icon:"\uD83D\uDED2",href:"/admin/orders",color:"bg-blue-100 text-blue-700"},{label:"Revenue",value:s?"...":o.revenue,icon:"\uD83D\uDCB0",href:"/admin/revenue",color:"bg-green-100 text-green-700"},{label:"Registered Users",value:s?"...":o.users,icon:"\uD83D\uDC64",href:"/admin/users",color:"bg-purple-100 text-purple-700"}].map(e=>(0,a.jsx)(i(),{href:e.href,className:"group",children:(0,a.jsxs)("div",{className:"p-6 rounded-xl shadow bg-white group-hover:shadow-lg transition flex flex-col items-start",children:[(0,a.jsx)("div",{className:"text-3xl mb-3 rounded-full p-3 ".concat(e.color),children:e.icon}),(0,a.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-2xl font-bold mt-1 mb-1",children:e.value}),(0,a.jsx)("div",{className:"ml-auto text-xs text-amber-500 mt-2 group-hover:underline",children:"View details"})]})},e.label))}),u&&(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:"\uD83D\uDCCA Today's Performance"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow hover:shadow-lg transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:"Orders Today"}),(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCE6"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:u.totalOrders||0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Orders placed today"})]}),(0,a.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow hover:shadow-lg transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:"Today's Revenue"}),(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCB5"})]}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["$",(u.totalRevenue||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Total revenue today"})]})]})]}),p&&p.length>0&&(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:"\uD83D\uDCC8 Weekly Trends (Last 7 Days)"}),(0,a.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orders"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Order Value"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((e,t)=>{let s=e.totalOrders>0?e.totalRevenue/e.totalOrders:0,r=new Date(e.date),l=new Date().toDateString()===r.toDateString();return(0,a.jsxs)("tr",{className:l?"bg-blue-50":"",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),l&&(0,a.jsx)("span",{className:"ml-2 text-xs text-blue-600 font-semibold",children:"(Today)"})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.totalOrders})," orders"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:(0,a.jsxs)("span",{className:"font-semibold text-green-600",children:["$",e.totalRevenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:["$",s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},t)})})]})}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Orders (7 days)"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:p.reduce((e,t)=>e+t.totalOrders,0)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue (7 days)"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",p.reduce((e,t)=>e+t.totalRevenue,0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Daily Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["$",(p.reduce((e,t)=>e+t.totalRevenue,0)/7).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:"Recent Orders"}),(0,a.jsx)("div",{className:"p-6 bg-white rounded-xl shadow",children:m.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status||"N/A"})]},t))})]})}):(0,a.jsx)("div",{className:"text-gray-400 italic",children:"No recent orders found"})})]})]})]})}}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=4572)),_N_E=e.O()}]);