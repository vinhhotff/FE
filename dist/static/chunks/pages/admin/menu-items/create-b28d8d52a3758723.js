(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685],{7392:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/menu-items/create",function(){return r(8464)}])},8464:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var s=r(7876),t=r(4232),l=r(9099),i=r(8230),n=r.n(i),o=r(7685),d=r(4177),c=r(7640);function m(){let e=(0,l.useRouter)(),{user:a,logout:r}=(0,c.A)(),[i,m]=(0,t.useState)(!1),[g,u]=(0,t.useState)(!1),[x,h]=(0,t.useState)([]),[p,b]=(0,t.useState)({name:"",description:"",price:"",category:"appetizer",images:[],isAvailable:!0}),f=async a=>{a.preventDefault();try{m(!0);let a=await Promise.all(x.map(async e=>(await (0,d.QM)(e)).data._id)),r={name:p.name,description:p.description,price:parseFloat(p.price),category:p.category,images:a,isAvailable:p.isAvailable};await (0,d.x2)(r),o.Ay.success("Menu item created successfully!"),e.push("/admin/menu-items")}catch(a){console.error("Error creating menu item:",a);let e=a instanceof Error?a.message:"Failed to create menu item";o.Ay.error(e)}finally{m(!1)}},v=(0,t.useCallback)(e=>{e.preventDefault(),u(!0)},[]),y=(0,t.useCallback)(e=>{e.preventDefault(),u(!1)},[]),j=(0,t.useCallback)(async e=>{e.preventDefault(),u(!1);let a=Array.from(e.dataTransfer.files);a.length>0&&N(a)},[]),N=async e=>{let a=e.filter(e=>e.type.startsWith("image/"));if(0===a.length)return void o.Ay.error("Please select image files");h(e=>[...e,...a]);let r=a.map(e=>{let a=new FileReader;return new Promise((r,s)=>{a.onload=e=>{var a;(null==(a=e.target)?void 0:a.result)?r(e.target.result):s("Failed to read file")},a.readAsDataURL(e)})});try{let e=await Promise.all(r);b(a=>({...a,images:[...a.images,...e]})),o.Ay.success("Images uploaded successfully!")}catch(e){o.Ay.error("Error uploading images")}};return(0,s.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,s.jsxs)("aside",{className:"hidden md:flex md:flex-col w-64 bg-gradient-to-tr from-orange-500 to-amber-700 text-white shadow-lg py-6 px-4",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold mb-8 tracking-wide flex items-center",children:[(0,s.jsx)("span",{className:"mr-3",children:"\uD83C\uDF7D️"})," Admin Panel"]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(n(),{href:"/admin/dashboard",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Dashboard"}),(0,s.jsx)(n(),{href:"/admin/menu-items",className:"block py-2 px-4 rounded bg-orange-700 bg-opacity-60 font-semibold",children:"Menu Items"}),(0,s.jsx)(n(),{href:"/admin/orders",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Orders"}),(0,s.jsx)(n(),{href:"/admin/users",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Users"}),(0,s.jsx)(n(),{href:"/admin/revenue",className:"block py-2 px-4 rounded hover:bg-orange-700 transition",children:"Revenue"})]}),(0,s.jsx)("hr",{className:"my-4 border-amber-300"}),(0,s.jsx)("div",{className:"text-sm text-orange-100 mt-auto",children:a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-bold",children:a.name}),(0,s.jsxs)("div",{className:"text-xs",children:["(",a.email,")"]}),(0,s.jsxs)("div",{className:"mt-1 text-orange-300",children:["Role: ",a.role]}),(0,s.jsx)("button",{onClick:()=>r(),className:"mt-4 w-full py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded text-sm font-semibold transition",children:"Logout"})]})})]}),(0,s.jsx)("main",{className:"flex-1 p-6 md:p-10",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(n(),{href:"/admin/menu-items",className:"text-orange-600 hover:text-orange-700 mb-4 inline-flex items-center",children:"← Back to Menu Items"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-800 mt-4",children:"Create New Menu Item"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Add a new delicious item to your menu"})]}),(0,s.jsxs)("form",{onSubmit:f,className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Item Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",required:!0,value:p.name,onChange:e=>b({...p,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",placeholder:"e.g., Margherita Pizza"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:p.description,onChange:e=>b({...p,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",rows:3,placeholder:"Describe this delicious item..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:p.price,onChange:e=>b({...p,price:e.target.value}),className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("select",{required:!0,value:p.category,onChange:e=>b({...p,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",children:[{value:"appetizer",label:"\uD83E\uDD57 Appetizer"},{value:"main",label:"\uD83C\uDF7D️ Main Course"},{value:"dessert",label:"\uD83C\uDF70 Dessert"},{value:"beverage",label:"\uD83E\uDD64 Beverage"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item images"}),(0,s.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(g?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-400"),onDragOver:v,onDragLeave:y,onDrop:j,children:p.images.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.images.map((e,a)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:e,alt:"Preview ".concat(a),className:"w-full h-24 object-cover rounded-lg shadow-md"}),(0,s.jsx)("button",{type:"button",onClick:()=>{h(e=>e.filter((e,r)=>r!==a)),b(e=>({...e,images:e.images.filter((e,r)=>r!==a)}))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 text-xs",children:"X"})]},a))}),(0,s.jsx)("div",{className:"flex gap-2 justify-center",children:(0,s.jsx)("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition cursor-pointer",children:"Add More"})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-6xl text-gray-400",children:"\uD83D\uDCF8"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium text-gray-700",children:"Drop your images here"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"or click to browse files"})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let a=e.target.files?Array.from(e.target.files):[];a.length>0&&N(a)},className:"hidden",id:"image-upload"}),(0,s.jsx)("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition cursor-pointer",children:"Choose File"})]})})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:p.isAvailable,onChange:e=>b({...p,isAvailable:e.target.checked}),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Available for ordering"})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-orange-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-orange-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Creating...":"Create Menu Item"}),(0,s.jsx)(n(),{href:"/admin/menu-items",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Cancel"})]})]})]})})]})}},9099:(e,a,r)=>{e.exports=r(4294)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=7392)),_N_E=e.O()}]);