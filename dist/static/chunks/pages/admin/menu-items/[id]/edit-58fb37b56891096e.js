(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{1534:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/menu-items/[id]/edit",function(){return r(6112)}])},6112:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>u});var s=r(7876),t=r(4232),l=r(9099),i=r(8230),n=r.n(i),o=r(7685),d=r(4177),c=r(1040),m=r(7640);function u(){let e=(0,l.useRouter)(),{id:a}=e.query,{user:r,logout:i}=(0,m.A)(),[u,g]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1),[h,b]=(0,t.useState)(!0),[f,y]=(0,t.useState)({name:"",description:"",price:"",category:"appetizer",images:"",isAvailable:!0});(0,t.useEffect)(()=>{a&&"string"==typeof a&&(async()=>{try{var r,s;b(!0);let e=await (0,d.xL)(a);console.log("getMenuItem response:",e.data);let t=(null==(r=e.data)?void 0:r.data)||e.data;y({name:t.name||"",description:t.description||"",price:(null==(s=t.price)?void 0:s.toString())||"",category:t.category||"appetizer",images:t.images||"",isAvailable:!1!==t.isAvailable})}catch(a){console.error("Error loading menu item:",a),o.Ay.error("Failed to load menu item"),e.push("/admin/menu-items")}finally{b(!1)}})()},[a]);let v=async s=>{if(s.preventDefault(),a)try{g(!0);let s={name:f.name,description:f.description,price:parseFloat(f.price),category:f.category,isAvailable:f.isAvailable};await c.A.put("".concat("http://localhost:8083/api/v1","/menu-items/").concat(a),s,{headers:{Authorization:"Bearer ".concat(r.token)}}),o.Ay.success("Menu item updated successfully!"),e.push("/admin/menu-items")}catch(e){var t,l;console.error("Error updating menu item:",e),o.Ay.error((null==(l=e.response)||null==(t=l.data)?void 0:t.message)||"Failed to update menu item")}finally{g(!1)}},j=(0,t.useCallback)(e=>{e.preventDefault(),x(!0)},[]),N=(0,t.useCallback)(e=>{e.preventDefault(),x(!1)},[]),w=(0,t.useCallback)(e=>{e.preventDefault(),x(!1);let a=Array.from(e.dataTransfer.files);if(a.length>0){let e=a[0];if(e.type.startsWith("image/")){let a=new FileReader;a.onload=e=>{var a;(null==(a=e.target)?void 0:a.result)&&(y({...f,images:e.target.result}),o.Ay.success("Image uploaded successfully!"))},a.readAsDataURL(e)}else o.Ay.error("Please drop an image file")}},[f]);return h?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading menu item..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen flex bg-gray-100",children:[(0,s.jsx)("aside",{}),(0,s.jsx)("main",{className:"flex-1 p-6 md:p-10",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(n(),{href:"/admin/menu-items",className:"text-orange-600 hover:text-orange-700 mb-4 inline-flex items-center",children:"← Back to Menu Items"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-800 mt-4",children:"Edit Menu Item"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Update the details of your menu item"})]}),(0,s.jsxs)("form",{onSubmit:v,className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Item Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>y({...f,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",placeholder:"e.g., Margherita Pizza"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:f.description,onChange:e=>y({...f,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",rows:3,placeholder:"Describe this delicious item..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:f.price,onChange:e=>y({...f,price:e.target.value}),className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("select",{required:!0,value:f.category,onChange:e=>y({...f,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",children:[{value:"appetizer",label:"\uD83E\uDD57 Appetizer"},{value:"main",label:"\uD83C\uDF7D️ Main Course"},{value:"dessert",label:"\uD83C\uDF70 Dessert"},{value:"beverage",label:"\uD83E\uDD64 Beverage"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Image"}),(0,s.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(p?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-400"),onDragOver:j,onDragLeave:N,onDrop:w,children:f.images?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("img",{src:f.images,alt:"Preview",className:"mx-auto max-h-48 rounded-lg shadow-md"}),(0,s.jsx)("div",{className:"flex gap-2 justify-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>y({...f,images:""}),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition",children:"Remove Image"})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-6xl text-gray-400",children:"\uD83D\uDCF8"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium text-gray-700",children:"Drop your image here"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"or click to browse files"})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(r)if(r.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{var a;(null==(a=e.target)?void 0:a.result)&&(y({...f,images:e.target.result}),o.Ay.success("Image uploaded successfully!"))},e.readAsDataURL(r)}else o.Ay.error("Please select an image file")},className:"hidden",id:"image-upload"}),(0,s.jsx)("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition cursor-pointer",children:"Choose File"})]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or enter image URL"}),(0,s.jsx)("input",{type:"url",value:f.images,onChange:e=>y({...f,images:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition",placeholder:"https://example.com/image.jpg"})]})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.isAvailable,onChange:e=>y({...f,isAvailable:e.target.checked}),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Available for ordering"})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:u,className:"flex-1 bg-orange-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-orange-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Updating...":"Update Menu Item"}),(0,s.jsx)(n(),{href:"/admin/menu-items",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Cancel"})]})]})]})})]})}},9099:(e,a,r)=>{e.exports=r(4294)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=1534)),_N_E=e.O()}]);