exports.id=861,exports.ids=[861],exports.modules={26667:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{$k:()=>l,Ai:()=>o,CK:()=>L,F$:()=>H,Gb:()=>K,J0:()=>F,Kb:()=>m,Lb:()=>A,O6:()=>I,Ow:()=>j,QM:()=>t,UB:()=>C,WF:()=>q,ZR:()=>E,_$:()=>B,am:()=>M,ax:()=>y,fS:()=>p,gL:()=>u,hU:()=>N,iD:()=>h,iY:()=>r,is:()=>n,k5:()=>z,kG:()=>G,mQ:()=>i,o8:()=>s,oI:()=>D,q2:()=>x,ri:()=>k,ut:()=>J,x2:()=>w,xL:()=>v});var e=c(1428),f=a([e]);let g=(e=(f.then?(await f)():f)[0]).default.create({baseURL:"http://localhost:8083/api/v1",withCredentials:!0});g.interceptors.request.use(a=>{let b=localStorage.getItem("accessToken");return b&&(a.headers.Authorization=`Bearer ${b}`),a}),g.interceptors.response.use(a=>a,a=>a.config?.url?.includes("/auth/login")&&(a.response?.status===400||a.response?.status===401)?Promise.resolve({error:a.response}):Promise.reject(a));let h=a=>g.post("/auth/login",a),i=a=>g.post("/auth/login-staff",a),j=()=>g.get("/auth/refresh"),k=()=>g.post("/auth/logout"),l=a=>g.post("/guest",a),m=a=>g.get("/guest",{params:a}),n=(a,b)=>g.patch(`/guest/${a}`,b),o=a=>g.delete(`/guest/${a}`),p=a=>g.post("/order",a),q=a=>g.get("/order",{params:a}),r=(a,b)=>g.patch(`/order/${a}`,b),s=a=>g.delete(`/order/${a}`),t=async a=>{let b=new FormData;return b.append("file",a),(await g.post("/files",b,{headers:{"Content-Type":"multipart/form-data"}})).data},u=a=>g.get("/menu-items",{params:a}),v=a=>g.get(`/menu-items/${a}`),w=a=>g.post("/menu-items",a),x=(a,b)=>g.patch(`/menu-items/${a}`,b),y=a=>g.delete(`/menu-items/${a}`),z=a=>g.get("/payment",{params:a}),A=a=>g.post("/payment",a),B=(a,b)=>g.patch(`/payment/${a}`,b),C=a=>g.delete(`/payment/${a}`),D=a=>g.get("/table",{params:a}),E=a=>g.post("/table",a),F=(a,b)=>g.patch(`/table/${a}`,b),G=a=>g.delete(`/table/${a}`),H=()=>g.get("/analytics/today"),I=()=>g.get("/analytics/weekly-trends"),J=async()=>{try{return(await D({})).data.data||[]}catch(a){return console.error("Error fetching tables:",a),[]}},K=async()=>{try{return(await q({})).data.data||[]}catch(a){return console.error("Error fetching orders:",a),[]}},L=async()=>{try{return(await z({})).data.data||[]}catch(a){return console.error("Error fetching payments:",a),[]}},M=async()=>{try{return(await u({})).data.data||[]}catch(a){return console.error("Error fetching menu items:",a),[]}},N=async()=>{try{let a;return(await (a={},g.get("/user",{params:a}))).data.data||[]}catch(a){return console.error("Error fetching users:",a),[]}};d()}catch(a){d(a)}})},32399:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{t:()=>i});var e=c(8732),f=c(82015),g=c(42893),h=a([g]);g=(h.then?(await h)():h)[0];class i extends f.Component{static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b),g.default.error("Something went wrong. Please try again.")}render(){return this.state.hasError?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Oops! Something went wrong"}),(0,e.jsx)("p",{className:"text-gray-600 mb-6",children:"We apologize for the inconvenience. Please try refreshing the page."}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition",children:"Refresh Page"})]})}):this.props.children}constructor(...a){super(...a),this.state={hasError:!1}}}d()}catch(a){d(a)}})},56861:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>k});var e=c(8732),f=c(62660),g=c(64946),h=c(32399),i=c(42893);c(82015),c(76142);var j=a([f,g,h,i]);function k({Component:a,pageProps:b}){return(0,e.jsx)(h.t,{children:(0,e.jsx)(f.i,{children:(0,e.jsxs)(g.O,{children:[(0,e.jsx)(a,{...b}),(0,e.jsx)(i.Toaster,{position:"top-right"})]})})})}[f,g,h,i]=j.then?(await j)():j,d()}catch(a){d(a)}})},62660:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{i:()=>i});var e=c(8732),f=c(28462),g=c(82015),h=a([f]);function i({children:a}){let[b]=(0,g.useState)(()=>new f.QueryClient({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1,retry:(a,b)=>!(b?.response?.status>=400&&b?.response?.status<500)&&a<3}}}));return(0,e.jsx)(f.QueryClientProvider,{client:b,children:a})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},64946:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m,O:()=>k});var e=c(8732),f=c(82015),g=c(26667),h=c(76338),i=c(42893),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let l=(0,f.createContext)(void 0),m=()=>{let a=(0,f.useContext)(l);if(!a)throw Error("useAuth must be used within AuthProvider");return a};function k({children:a}){let[b,c]=(0,f.useState)(null),[d,j]=(0,f.useState)(!0);async function k(a){try{console.log("Starting login process...");try{let b=await (0,g.iD)(a);if(console.log("Login response:",b.data),!b.data||!b.data.data||!b.data.data.user)return i.default.error("Invalid email or password. Please try again."),{success:!1};{let a=b.data.data.user,d=b.data.data.accessToken;c(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("accessToken",d),i.default.success(`Welcome back, ${a.name}!`);let e=a.role.toLowerCase();return{success:!0,role:e}}}catch(a){return console.error("API Error in loginUser:",a),a.response?.status===400||a.response?.status===401?i.default.error("Invalid email or password. Please try again."):a.response?.status===403?i.default.error("Access denied. Please check your credentials."):a.response?.status>=500?i.default.error("Server error. Please try again later."):"NETWORK_ERROR"===a.code||a.message?.includes("Network Error")?i.default.error("Network error. Please check your connection."):a.response?.data?.message?i.default.error(a.response.data.message):"AxiosError"===a.name?i.default.error("Login failed. Please check your credentials and try again."):i.default.error("Login failed. Please try again."),{success:!1}}}catch(a){return console.error("Outer error in loginUser:",a),i.default.error("An unexpected error occurred. Please try again."),{success:!1}}}async function m(a){try{let b=await (0,g.iD)(a);if(console.log("Admin login response:",b.data),b.data&&b.data.data&&b.data.data.user){let a=b.data.data.user,d=b.data.data.accessToken;if("admin"!==a.role.toLowerCase())return i.default.error("Access denied. Admin privileges required."),!1;return c(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("accessToken",d),i.default.success(`Welcome back, Admin ${a.name}!`),!0}i.default.error("Invalid email or password. Please try again.")}catch(a){console.error("Admin login failed:",a),a.response?.status===400||a.response?.status===401?i.default.error("Invalid email or password. Please try again."):a.response?.status===403?i.default.error("Access denied. Admin privileges required."):a.response?.status>=500?i.default.error("Server error. Please try again later."):a.response?.data?.message?i.default.error(a.response.data.message):i.default.error("Login failed. Please try again.")}return!1}async function n(a){try{let b=await (0,g.mQ)(a);if(console.log("Staff login response:",b.data),b.data&&b.data.data&&b.data.data.user){let a=b.data.data.user,d=b.data.data.accessToken;return c(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("accessToken",d),i.default.success(`Welcome back, ${a.name}!`),!0}i.default.error("Invalid email or password. Please try again.")}catch(a){console.error("Staff login failed:",a),a.response?.status===400||a.response?.status===401?i.default.error("Invalid email or password. Please try again."):a.response?.status===403?i.default.error("Access denied. Staff privileges required."):a.response?.status>=500?i.default.error("Server error. Please try again later."):a.response?.data?.message?i.default.error(a.response.data.message):i.default.error("Login failed. Please try again.")}return!1}async function o(a){try{await (0,g.ri)(),console.log("Logout API called successfully")}catch(a){console.error("Logout API failed:",a)}h.default.remove("123123"),c(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),i.default.success("Logged out successfully");let b=a||"/login";setTimeout(()=>{window.location.href=b},1500)}return(0,e.jsx)(l.Provider,{value:{user:b,loading:d,login:k,loginAdmin:m,loginStaff:n,logout:o},children:a})}d()}catch(a){d(a)}})},76142:()=>{}};