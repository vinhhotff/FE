(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{139:(e,t,n)=>{"use strict";n.d(t,{QueryProvider:()=>o});var r=n(5155),s=n(2922),a=n(6715),i=n(2115);function o(e){let{children:t}=e,[n]=(0,i.useState)(()=>new s.E({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1,retry:(e,t)=>{var n,r;return(!((null==t||null==(n=t.response)?void 0:n.status)>=400)||!((null==t||null==(r=t.response)?void 0:r.status)<500))&&e<3}}}}));return(0,r.jsx)(a.Ht,{client:n,children:t})}},347:()=>{},4615:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(5155),s=n(6874),a=n.n(s),i=n(6537);function o(){let{user:e,logout:t}=(0,i.A)();return(0,r.jsx)("header",{className:"bg-orange-500 text-white shadow-lg py-4",children:(0,r.jsxs)("nav",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,r.jsx)(a(),{href:"/",className:"text-2xl font-bold hover:text-orange-200 transition",children:"\uD83C\uDF7D️ Restaurant"}),(0,r.jsxs)("ul",{className:"flex space-x-6 items-center",children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/",className:"hover:text-orange-200 transition font-medium",children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/menu",className:"hover:text-orange-200 transition font-medium",children:"Menu"})}),e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("li",{className:"text-orange-200",children:["Welcome, ",e.name," (",e.role,")"]}),(0,r.jsx)("li",{children:"admin"===e.role?(0,r.jsx)(a(),{href:"/admin",className:"hover:text-orange-200 transition font-medium",children:"Dashboard"}):(0,r.jsx)(a(),{href:"/staff",className:"hover:text-orange-200 transition font-medium",children:"Dashboard"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:t,className:"bg-orange-600 hover:bg-orange-700 px-3 py-1 rounded transition font-medium",children:"Logout"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/admin/login",className:"hover:text-orange-200 transition font-medium",children:"Admin"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:"/staff/login",className:"hover:text-orange-200 transition font-medium",children:"Staff"})})]})]})]})})}},6537:(e,t,n)=>{"use strict";n.d(t,{AuthProvider:()=>u,A:()=>l});var r=n(5155),s=n(2115);let a=n(3464).A.create({baseURL:"http://localhost:8083/apt/v1",withCredentials:!0});var i=n(7383);let o=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used in AuthProvider");return e};function u(e){let{children:t}=e,[n,l]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0);async function c(e){try{let t=await a.post("/auth/login",e);if(t.data&&t.data.user)return l(t.data.user),!0}catch(e){}return!1}async function h(e){try{let t=await a.post("/auth/login-staff",e);if(t.data&&t.data.user)return l(t.data.user),!0}catch(e){}return!1}return(0,s.useEffect)(()=>{!async function(){d(!0);try{let e=await a.post("/auth/refresh");e.data&&e.data.user?l(e.data.user):l(null)}catch(e){l(null)}d(!1)}()},[]),(0,r.jsx)(o.Provider,{value:{user:n,loading:u,loginAdmin:c,loginStaff:h,logout:function(){i.A.remove("jwt"),l(null),window.location.href="/admin/login"}},children:t})}},8741:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2093,23)),Promise.resolve().then(n.t.bind(n,7735,23)),Promise.resolve().then(n.bind(n,3568)),Promise.resolve().then(n.t.bind(n,347,23)),Promise.resolve().then(n.bind(n,4615)),Promise.resolve().then(n.bind(n,6537)),Promise.resolve().then(n.bind(n,139))}},e=>{e.O(0,[360,874,200,441,964,358],()=>e(e.s=8741)),_N_E=e.O()}]);